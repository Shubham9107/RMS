"use strict";(self.webpackChunkrestaurant_management=self.webpackChunkrestaurant_management||[]).push([[591],{8004:(e,t,s)=>{s.d(t,{Tz:()=>u,l$:()=>r,GK:()=>n,Vy:()=>l,gS:()=>o});var i=s(7503);const a=s(7154).A.create({baseURL:"https://codx-json-server.vercel.app"}),r=async()=>{try{return(await a.get("/api/tables")).data}catch(e){i.oR.error("Somthing Wrong!")}},l=async e=>{try{return(await a.get("/api/tables/"+e)).data}catch(t){i.oR.error("Somthing Wrong!")}},n=async e=>{try{return(await a.get("/api/tables?status=Available")).data.filter((t=>t.seating_capacity>=e))}catch(t){i.oR.error("Somthing Wrong!")}},o=async()=>{try{return(await a.get("/api/tables?status=Booked")).data}catch(e){i.oR.error("Somthing Wrong!")}},u=async e=>{let{id:t,data:s}=e;try{return(await a.patch("/api/tables/"+t,s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data}catch(r){i.oR.error("Somthing Wrong!")}}},4591:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var i=s(5043),a=s(4858),r=s(5795),l=s(3193),n=s(9190),o=s(9285),u=s(8988),c=s(1906),d=s(835),h=s(8004),A=s(8430),m=s(3248),b=s(3747),v=s(7097),p=s(8033),g=s(7503),x=s(579);const j=()=>{const{IsAuth:e}=(0,i.useContext)(A.c),t=(0,d.Zp)(),{register:s,handleSubmit:j,formState:{errors:M}}=(0,a.mN)(),y=(0,m.jE)(),{isLoading:k,data:f}=(0,b.I)({queryKey:["booking"],queryFn:h.l$}),{mutateAsync:P}=(0,v.n)({mutationFn:h.Tz,onSuccess:()=>{y.invalidateQueries(["booking"]),g.oR.success("Table Booked")}}),{mutateAsync:w}=(0,v.n)({mutationFn:h.GK,onSuccess:e=>{y.setQueriesData(["booking"],e)}}),C=f||[];if(k)return(0,x.jsx)(p.A,{});return(0,x.jsx)("div",{className:"BookingForm",children:(0,x.jsxs)("form",{action:"",method:"post",onSubmit:j((s=>{if(e){let e=(new Date).toISOString().slice(0,10);const i={reservation:{Order:"Ak"+Math.random().toString(16).slice(2),Table:s.table,name:s.name,email:s.email,mobile:s.mobile,checkIn:s.checkin,time:s.time,guest:s.guest,booked:e},status:"Booked"};P({id:s.table,data:i}),t("/orders")}else g.oR.success("Login Now"),t("/login")})),children:[(0,x.jsx)(r.A,{...s("name",{required:"Name Field Required"}),type:"text",label:"Name",color:"success",autoComplete:"true",error:!!M.name,variant:"outlined"}),(0,x.jsx)(r.A,{...s("email",{required:"Email Field Required"}),type:"email",label:"Email",autoComplete:"true",error:!!M.email,color:"success",variant:"outlined"}),(0,x.jsx)(r.A,{...s("mobile",{required:"Mobile Field Required",maxLength:{value:13,message:"Maximun 13 Characters"},minLength:{value:10,message:"Minimun 10 Characters"}}),type:"number",autoComplete:"true",error:!!M.mobile,label:"Mobile",color:"success",variant:"outlined"}),(0,x.jsx)(r.A,{...s("checkin",{required:"Check-in Field Required"}),onFocus:e=>e.target.type="date",type:"text",autoComplete:"true",error:!!M.checkin,label:"Check-In",color:"success",variant:"outlined"}),(0,x.jsxs)(l.A,{sx:{width:"330px"},children:[(0,x.jsx)(n.A,{color:"success",id:"time-label",children:"Time"}),(0,x.jsxs)(o.A,{...s("time",{required:"time Field Required"}),labelId:"time-label",label:"Time",error:!!M.time,color:"success",defaultValue:"",children:[(0,x.jsx)(u.A,{disabled:!0,value:""}),(0,x.jsx)(u.A,{value:"8 AM - 10 AM",children:"08 AM - 10 AM"}),(0,x.jsx)(u.A,{value:"10 AM - 12 PM",children:"10 AM - 12 PM"}),(0,x.jsx)(u.A,{value:"12 PM - 2 PM",children:"12 PM - 02 PM"}),(0,x.jsx)(u.A,{value:"2 PM - 4 PM",children:"02 PM - 04 PM"}),(0,x.jsx)(u.A,{value:"4 PM - 6 PM",children:"04 PM - 06 PM"}),(0,x.jsx)(u.A,{value:"6 PM - 8 PM",children:"06 PM - 08 PM"})]})]}),(0,x.jsxs)(l.A,{sx:{width:"330px"},children:[(0,x.jsx)(n.A,{color:"success",id:"guest-label",children:"Guest"}),(0,x.jsxs)(o.A,{...s("guest",{required:"guest Field Required"}),labelId:"guest-label",label:"Guest",error:!!M.guest,color:"success",onChange:function(e){w(e.target.value)},defaultValue:"",children:[(0,x.jsx)(u.A,{disabled:!0,value:""}),(0,x.jsx)(u.A,{value:"1",children:"1 Person"}),(0,x.jsx)(u.A,{value:"2",children:"2 Person"}),(0,x.jsx)(u.A,{value:"3",children:"3 Person"}),(0,x.jsx)(u.A,{value:"4",children:"4 Person"}),(0,x.jsx)(u.A,{value:"5",children:"5 Person"})]})]}),(0,x.jsxs)(l.A,{sx:{width:"330px"},children:[(0,x.jsx)(n.A,{color:"success",id:"table-label",children:"Table"}),(0,x.jsxs)(o.A,{...s("table",{required:"Table Field Required"}),labelId:"table-label",label:"Table",error:!!M.table,color:"success",defaultValue:"",children:[(0,x.jsx)(u.A,{disabled:!0,value:""}),C&&C.map(((e,t)=>(0,x.jsx)(u.A,{value:e.table_no,children:e.table_no},t)))]})]}),(0,x.jsx)(c.A,{type:"submit",variant:"contained",children:"Book Table Now"})]})})};var M=s(6446),y=s(5865);const k=()=>(0,x.jsxs)(M.A,{className:"BookingPage",children:[(0,x.jsx)(y.A,{className:"first-title",variant:"h6",children:"Booking"}),(0,x.jsx)(y.A,{className:"second-title",variant:"h4",children:"A Culinary Journey Awaits!"}),(0,x.jsx)(j,{})]})},7097:(e,t,s)=>{s.d(t,{n:()=>k});var i,a,r,l,n,o=s(5043),u=s(9790),c=s(5149),d=s(8458),h=s(6562),A=s(4558),m=s(5239),b=s(1454),v=s(329),p=s(9723),g=(i=new WeakMap,a=new WeakMap,r=new WeakMap,l=new WeakMap,n=new WeakSet,class extends v.Q{constructor(e,t){super(),(0,u.A)(this,n),(0,c.A)(this,i,void 0),(0,c.A)(this,a,void 0),(0,c.A)(this,r,void 0),(0,c.A)(this,l,void 0),(0,A.A)(i,this,e),this.setOptions(t),this.bindMethods(),(0,h.A)(n,this,x).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=(0,d.A)(i,this).defaultMutationOptions(e),(0,p.f8)(this.options,s)||(0,d.A)(i,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,d.A)(r,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,p.EN)(s.mutationKey)!==(0,p.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,d.A)(r,this))||void 0===t?void 0:t.state.status)&&(0,d.A)(r,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,d.A)(r,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,h.A)(n,this,x).call(this),(0,h.A)(n,this,j).call(this,e)}getCurrentResult(){return(0,d.A)(a,this)}reset(){var e;null===(e=(0,d.A)(r,this))||void 0===e||e.removeObserver(this),(0,A.A)(r,this,void 0),(0,h.A)(n,this,x).call(this),(0,h.A)(n,this,j).call(this)}mutate(e,t){var s;return(0,A.A)(l,this,t),null===(s=(0,d.A)(r,this))||void 0===s||s.removeObserver(this),(0,A.A)(r,this,(0,d.A)(i,this).getMutationCache().build((0,d.A)(i,this),this.options)),(0,d.A)(r,this).addObserver(this),(0,d.A)(r,this).execute(e)}});function x(){var e,t;const s=null!==(e=null===(t=(0,d.A)(r,this))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,m.$)();(0,A.A)(a,this,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function j(e){b.j.batch((()=>{if((0,d.A)(l,this)&&this.hasListeners()){const h=(0,d.A)(a,this).variables,A=(0,d.A)(a,this).context;var t,s,i,r;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(s=(0,d.A)(l,this)).onSuccess)||void 0===t||t.call(s,e.data,h,A),null===(i=(r=(0,d.A)(l,this)).onSettled)||void 0===i||i.call(r,e.data,null,h,A);else if("error"===(null===e||void 0===e?void 0:e.type)){var n,o,u,c;null===(n=(o=(0,d.A)(l,this)).onError)||void 0===n||n.call(o,e.error,h,A),null===(u=(c=(0,d.A)(l,this)).onSettled)||void 0===u||u.call(c,void 0,e.error,h,A)}}this.listeners.forEach((e=>{e((0,d.A)(a,this))}))}))}var M=s(3248),y=s(3247);function k(e,t){const s=(0,M.jE)(t),[i]=o.useState((()=>new g(s,e)));o.useEffect((()=>{i.setOptions(e)}),[i,e]);const a=o.useSyncExternalStore(o.useCallback((e=>i.subscribe(b.j.batchCalls(e))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),r=o.useCallback(((e,t)=>{i.mutate(e,t).catch(y.l)}),[i]);if(a.error&&(0,y.G)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:r,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=591.668ee0fa.chunk.js.map